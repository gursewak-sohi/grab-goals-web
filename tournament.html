<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrabGoals</title>
    <!-- <link rel="shortcut icon" href="./favicon.svg" /> -->
   
    <!-- Main CSS -->
    <link href="./assets/css/style.css" rel="stylesheet" />
    <script type="text/javascript">
        window.onload = function() {
            // Parse the URL parameters
            const params = new URLSearchParams(window.location.search); // Remove '#' at start
            const tournamentId = params.get('id');
            
            // Construct the URL to your mobile app
            const appUrl = `grabgoals://tournament?id=${tournamentId}`;
            // Redirect to your mobile app
            window.location.href = appUrl;

            setTimeout(function() {
                // Determine if the user is on iOS or Android
                const isiOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
                const isAndroid = /Android/.test(navigator.userAgent);

                let storeUrl = 'index.html'; // Default to your fallback URL
                if (isiOS) {
                    storeUrl = 'https://apps.apple.com/app/id6478873709'; // Replace with your App Store URL
                } else if (isAndroid) {
                    storeUrl = 'https://play.google.com/store/apps/details?id=com.grabgoals.bundle'; // Replace with your Play Store URL
                }

                // Use window.confirm to ask the user if they want to install the app
                const userResponse = window.confirm('Seems like the GrabGoals app is not installed. Would you like to install it?');
                
                if (userResponse) {
                    // Redirect the user to the App Store or Play Store based on their device
                    window.location.href = storeUrl;
                } else {
                    // If the user declines, redirect to the fallback URL
                    window.location.href = 'index.html';
                }
                }, 10000); // Adjust timing based on testing
            }
        
    </script>
</head>
<body class="text-base antialiased p-4 justify-center items-center flex h-screen bg-gray-100">
    <div class="text-center p-6 bg-white shadow-md rounded-lg max-w-sm mx-auto -mt-20">
        <h1 class="text-lg font-semibold mb-2">Redirecting...</h1>
        <p class="text-gray-600">Please wait, you are being redirected to the app.</p>
        <div class="mt-4">
            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-blue-500 inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.963 7.963 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span class="text-gray-500">Loading...</span>
        </div>
    </div>
</body>
</html>
